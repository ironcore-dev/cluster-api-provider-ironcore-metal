# e2e tests

- `config/ironcore.yaml` - main e2e test configuration file.
  *Note:* if you want to change the CAPI version, add it to `data/shared/capi/` (take the existing one as an example â€” you should download `metadata.yaml` from the CAPI release).

# clusterctl upgrade test

- If you want to introduce a new `ironcore-metal` provider version:
    1. Add it to `ironcore.yaml` (take the already specified versions as an example).
    2. Create the folder `data/infrastructure-ironcore-metal/vX.Y.Z`.
    3. Add `metadata.yaml` there with the old versions and the new one.
    4. `infrastructure-components.yaml` will be auto-generated by Kustomize in the Makefile, you just need to specify the correct version here.
    5. **Important:** don't forget to change the provider image in the *previous* version's `infrastructure-components.yaml` from `latest` to the actual published image from ghcr.

- `cluster-template.yaml` contains CR templates for the cluster. At some point we can add auto-generation for the cluster-template, but for now I didn't implement it to avoid over-engineering (right now we only have 5-6 CRs), so it has to be updated manually.